<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="manifest" href="manifest.json">
 <link rel="stylesheet" href="style.css">
<meta name="theme-color" content="#000000">
<title></title>
<script>
  // Se Ã¨ installata come app (PWA standalone), non mostrare il titolo in alto
  if (window.matchMedia('(display-mode: standalone)').matches) {
    document.title = '';
  } else {
    // In browser, mostra il titolo con le stelline nella scheda
    document.title = 'âœ¨ Studio Abigail âœ¨';
  }
</script>
<link rel="manifest" href="manifest.json">
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('service-worker.js')
    .then(() => console.log('Service Worker registrato'))
    .catch((error) => console.log('Errore Service Worker:', error));
  }
</script>  
  <style>
    body {
      background-color: #FFEDD3;
      color: #5a4632;
      font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      height: 100vh;
      margin: 0;
      padding: 0;
    }

    h1 {
      font-size: 1.8rem;
      text-align: center;
      margin: 40px 0 10px;
      color: #5a4632;
    }

    .title-rule {
      width: 70%;
      height: 1px;
      background: linear-gradient(to right,
        transparent 0%,
        rgba(208,176,112,0.75) 30%,
        rgba(208,176,112,0.75) 70%,
        transparent 100%);
      margin-bottom: 40px;
      border-radius: 1px;
    }

    .chat-container {
  width: 100%;
  max-width: 100%;
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  padding: 0 1rem;
    }

   .message-wrapper {
  display: flex;
  width: 100%;
  margin: 20px 0;
  padding: 0 3vw; /* aggiunge respiro laterale */
  box-sizing: border-box;
}

    .message-wrapper.bot {
  justify-content: flex-start; /* le mie bolle piÃ¹ a sinistra */
  padding-left: 3vw;
}

   .message-wrapper.user {
  justify-content: flex-end; /* la tua bolla rimane a destra */
  padding-right: 3vw;
}

    .message {
      font-size: 1rem;
      line-height: 1.5;
      color: #5a4632;
    }

    .message.bot {
      width: calc(100% - 2cm);
      margin: 0 1cm;
      text-align: justify;
    }

    .message.user {
      width: 60%;
      text-align: right;
      margin-right: 1cm;
    }

    .time {
      font-size: 0.8rem;
      opacity: 0.5;
    }

   .time-line {
  height: 1px;
  width: 1.5cm;
  background-color: rgba(208,176,112,0.75);
  border-radius: 1px;
  margin-top: 5px;
}

    .time-left { margin-left: 0; }
    .time-right { margin-left: auto; }

    .composer-rule {
      width: 70%;
      height: 1px;
      background: linear-gradient(to right,
        transparent 0%,
        rgba(208,176,112,0.75) 30%,
        rgba(208,176,112,0.75) 70%,
        transparent 100%);
      margin: 26px auto 18px;
      border-radius: 1px;
    }

    .composer {
      width: 70%;
      max-width: 900px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 15px;
      margin-bottom: 20px;
    }

    .side-buttons {
      display: flex;
      flex-direction: column;
      gap: 5px;
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      cursor: pointer;
    }

    .side-buttons div:hover { opacity: 0.7; }

    .input-box {
      flex-grow: 1;
      border: 1px solid rgba(208,176,112,0.4);
      border-radius: 20px;
      padding: 12px 16px;
      background: transparent;
      font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
      font-size: 1rem;
      color: #5a4632;
      text-align: justify;
      transition: border-color 0.3s ease;
    }

    .input-box::placeholder {
      color: rgba(90,70,50,0.4);
    }

    .input-box:focus {
      outline: none;
      border-color: #8B6B42;
      box-shadow: 0 0 3px rgba(139, 107, 66, 0.4);
    }

    .right-buttons {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      gap: 5px;
    }

    .send { text-transform: uppercase; cursor: pointer; }
    .mic { cursor: pointer; }
  </style>
</head>
<body>
  <h1>âœ¨ Studio Abigail âœ¨</h1>
  <div class="title-rule"></div>

  <div class="chat-container" id="chatContainer">
    <div class="message-wrapper bot">
      <div class="message bot">
        <p>Buongiorno Marika, come vuoi procedere oggi con la struttura grafica?</p>
        <div class="time-line time-left"></div>
        <div class="time">09:41</div>
      </div>
    </div>

    <div class="message-wrapper user">
      <div class="message user">
        <p>Vorrei rendere tutto piÃ¹ armonico e pulito, senza bordi visibili.</p>
        <div class="time-line time-right"></div>
        <div class="time" style="text-align: right;">09:42</div>
      </div>
    </div>
  </div>

  <div class="composer-rule"></div>

  <div class="composer">
    <div class="side-buttons">
      <div>MARIKA</div>
      <div>CLIENTI</div>
    </div>
    <textarea class="input-box" id="messageInput" placeholder="Scrivi un messaggio..."></textarea>
    <div class="right-buttons">
      <div class="send" id="sendBtn">INVIA</div>
      <div class="mic">ðŸŽ¤</div>
    </div>
  </div>

  <script>
    const textarea = document.getElementById("messageInput");
    const sendBtn = document.getElementById("sendBtn");
    const chatContainer = document.getElementById("chatContainer");

    textarea.addEventListener("keydown", function(e) {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        sendBtn.click();
      }
    });

    sendBtn.addEventListener("click", () => {
      const text = textarea.value.trim();
      if (text) {
        const wrapper = document.createElement("div");
        wrapper.className = "message-wrapper user";
        wrapper.innerHTML = `
          <div class="message user">
            <p>${text}</p>
            <div class="time-line time-right"></div>
            <div class="time" style="text-align: right;">
              ${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}
            </div>
          </div>
        `;
        chatContainer.appendChild(wrapper);
        chatContainer.scrollTop = chatContainer.scrollHeight;
        textarea.value = "";
      }
    });
    document.getElementById("sendBtn").addEventListener("click", async () => {
  const input = document.getElementById("messageInput");
  const testo = input.value.trim();
  if (!testo) return;

  aggiungiMessaggio(testo, "user");

  // ðŸ”¹ Normalizza testo per evitare errori di maiuscole/minuscole
  const comando = testo.toLowerCase();

  // ðŸ”¹ Elenco comandi riconosciuti
  const comandi = {
    ree: "Esecuzione R.E.E. â€” Reset Energetico Esteso avviato.",
    res: "Esecuzione R.E.S. â€” Reset Energetico Sintetico avviato.",
    rae: "Esecuzione R.A.E. â€” Lettura Aurica Estesa avviata.",
    ras: "Esecuzione R.A.S. â€” Lettura Aurica Sintetica avviata.",
    rve: "Esecuzione R.V.E. â€” Visione Vibrazionale Estesa avviata.",
    rvs: "Esecuzione R.V.S. â€” Visione Vibrazionale Sintetica avviata.",
    reteriae: "Esecuzione R.Eteria.E â€” Lettura Eterica Estesa avviata.",
    reterias: "Esecuzione R.Eteria.S â€” Lettura Eterica Sintetica avviata.",
    rvc: "Esecuzione R.V.C. â€” Visione Vibrazionale di Connessione avviata.",
    rva: "Esecuzione R.V.A. â€” Identikit Vibrazionale Aurico avviato.",
    rvv: "Esecuzione R.V.V. â€” Visione Vibrazionale Verticale avviata.",
    rvet: "Esecuzione R.V.Eteria â€” Visione Vibrazionale Eterica avviata.",
    rvi: "Esecuzione R.V.I. â€” IdentitÃ  Vibrazionale Interiore avviata."
  };

  // ðŸ”¹ Controlla se il testo corrisponde a un comando
  let risposta;
  if (comandi[comando]) {
    risposta = comandi[comando];
  } else {
    risposta = "âœ¨ Comando non riconosciuto. Attendere istruzioni o riprovare.";
  }

  aggiungiMessaggio(risposta, "assistant");
  input.value = "";
});  </script>
  <script>
  let deferredPrompt;
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    const installBanner = document.createElement('button');
    installBanner.textContent = 'ðŸ“± Installa Studio Abigail';
    installBanner.style.position = 'fixed';
    installBanner.style.bottom = '20px';
    installBanner.style.right = '20px';
    installBanner.style.padding = '10px 20px';
    installBanner.style.background = '#b49a6d';
    installBanner.style.color = '#fff';
    installBanner.style.border = 'none';
    installBanner.style.borderRadius = '12px';
    installBanner.style.fontFamily = 'Palatino Linotype, serif';
    installBanner.style.fontSize = '16px';
    installBanner.style.cursor = 'pointer';
    document.body.appendChild(installBanner);

    installBanner.addEventListener('click', async () => {
      installBanner.style.display = 'none';
      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      if (outcome === 'accepted') {
        console.log('App installed');
      }
      deferredPrompt = null;
    });
  });
</script>
</body>
</html>
