<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="manifest" href="manifest.json">
 <link rel="stylesheet" href="style.css">
<meta name="theme-color" content="#000000">
<title></title>
<script>
  // Se Ã¨ installata come app (PWA standalone), non mostrare il titolo in alto
  if (window.matchMedia('(display-mode: standalone)').matches) {
    document.title = '';
  } else {
    // In browser, mostra il titolo con le stelline nella scheda
    document.title = 'âœ¨ Studio Abigail âœ¨';
  }
</script>
<link rel="manifest" href="manifest.json">
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('service-worker.js')
    .then(() => console.log('Service Worker registrato'))
    .catch((error) => console.log('Errore Service Worker:', error));
  }
</script>  
  <style>
    body {
      background-color: #FFEDD3;
      color: #5a4632;
      font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      height: 100vh;
      margin: 0;
      padding: 0;
    }

    h1 {
      font-size: 1.8rem;
      text-align: center;
      margin: 40px 0 10px;
      color: #5a4632;
    }

    .title-rule {
      width: 70%;
      height: 1px;
      background: linear-gradient(to right,
        transparent 0%,
        rgba(208,176,112,0.75) 30%,
        rgba(208,176,112,0.75) 70%,
        transparent 100%);
      margin-bottom: 40px;
      border-radius: 1px;
    }

 .chat-container {
  width: 100%;
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  margin: 0;
  padding: 0;
  overflow-y: auto;
  box-sizing: border-box;
}

.message-wrapper {
  display: flex;
  width: 100%;
  margin: 6px 0; /* distanza piÃ¹ naturale tra messaggi */
  padding: 0;
  box-sizing: border-box;
}

/* nessuna centratura forzata: gestiamo solo i margini */
.message.bot {
  width: calc(100%); /* 0,5 cm visivi */
  text-align: justify;
text-justify: inter-word;
  background: transparent;
  padding: 0.2em 0.2em 0.2em 0;
  margin-left: 0px; /* distanza precisa dal bordo sinistro */
  margin-bottom: 0.5px; /* il mio messaggio scende meno */
  border: none;
}

.message.user {
  width: 60%;
  text-align: justify;
text-justify: inter-word;
text-align-last: right; /* parole singole o righe corte restano a destra */
  background: transparent;
  padding: 0.2em 0 0.2em 0.2em;
  margin-left: auto; /* spinge la bolla completamente a destra */
  margin-right: 0px; /* distanza ottica dal bordo destro */
  margin-top: 0.5px; /* la tua bolla sale un poâ€™ verso la mia */
  border: none;
}

/* ðŸ”¹ Aggiungi questo blocco subito dopo */
.message p {
  margin: 0;
  color: #5a4632;
  line-height: 1.5;
}
    .time {
      font-size: 0.8rem;
      opacity: 0.5;
    }

   .time-line {
  height: 1px;
  width: 1.5cm;
  background-color: rgba(208,176,112,0.75);
  border-radius: 1px;
  margin-top: 5px;
}

    .time-left { margin-left: 0; }
    .time-right { margin-left: auto; }

 .composer-rule {
  width: 70%;
  height: 1px;
  background: linear-gradient(to right,
    transparent 0%,
    rgba(208,176,112,0.75) 30%,
    rgba(208,176,112,0.75) 70%,
    transparent 100%);
  margin: 4px auto 18px; /* prima era 10px â€” ora leggermente piÃ¹ su */
  border-radius: 1px;
}

  .composer {
  width: 100%;
  max-width: 900px;
  display: flex;
  align-items: center; /* centratura verticale perfetta */
  justify-content: space-between;
  margin: 0 auto 20px auto;
  padding: 0;
  box-sizing: border-box;
  height: 3.4em; /* uniforma altezza rispetto alla bolla */
}

  .side-buttons {
  display: flex;
  flex-direction: column;
  justify-content: center; /* centrati verticalmente */
  align-items: flex-start;
  gap: 3px;
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  cursor: pointer;
  color: #5a4632;
  padding-left: 0.8em;
  height: 100%;
}

    .side-buttons div:hover { opacity: 0.7; }

    .input-box {
  flex-grow: 1;
  border: none; /*
  border-radius: 18px;
  padding: 10px 14px;
  background: transparent;
  font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
  font-size: 1rem;
  color: #5a4632;
  text-align: left;
  margin: 0 0.8em;
  transition: border-color 0.3s ease, box-shadow 0.3s ease;
}
    /* ðŸ”¹ Posizionamento raffinato del placeholder */
.input-box::placeholder {
  color: rgba(90, 70, 50, 0.45);
  transform: translateY(4px); /* lo abbassa leggermente */
  text-align: center; /* centrato orizzontalmente */
  display: block;
}

    .input-box:focus {
      outline: none;
      border-color: #8B6B42;
      box-shadow: none; /*
    }
    
.right-buttons {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  padding-right: clamp(1em, 3vw, 2.2em);
  color: #5a4632;
  position: relative;
}

/* INVIA leggermente piÃ¹ giÃ¹ (perfettamente in linea con MARIKA) */
.right-buttons .send {
  text-transform: uppercase;
  cursor: pointer;
  position: relative;
  top: 0.45em; /* +0.1em rispetto a prima */
  line-height: 1;
}

.right-buttons .mic {
  cursor: pointer;
  font-size: 1rem;
  position: relative;
  top: 0.05em; /* microfono piÃ¹ in alto, ora perfettamente sulla linea di CLIENTI */
}
    
.right-buttons .mic {
  margin-top: 0em;
}
    
@media (max-width: 700px) {
  .right-buttons {
    gap: 0.5em;
    font-size: 0.85rem;
  }
  
  .send { text-transform: uppercase; cursor: pointer; }
    .mic { cursor: pointer; }

/* ðŸ”¹ Aggiungi da qui in giÃ¹ */
@media (max-width: 700px) {
  .chat-container {
    max-width: 100%;
    padding-inline: 4vw;
  }

  .message.bot,
  .message.user {
    max-width: 90%;
    padding: 0.7em 1em;
  }
/* ðŸ”¹ Effetti interattivi eleganti */
.side-buttons div:hover,
.send:hover,
.mic:hover {
  color: #8B6B42;
  transition: color 0.3s ease;
}

/* ðŸ”¹ Pulsante INVIA in stato attivo */
.send:active {
  color: #B68C55;
  transform: scale(0.98);
  transition: all 0.15s ease-in-out;
}

/* ðŸ”¹ Microfono acceso (stato registrazione simulato) */
.mic.active {
  color: #B68C55;
  text-shadow: 0 0 4px rgba(182, 140, 85, 0.6);
  transition: all 0.3s ease;
}
// Effetto microfono attivo
const micButton = document.querySelector('.mic');
micButton.addEventListener('click', () => {
  micButton.classList.toggle('active');
});
  
  /* ðŸ”¹ Fino a qui */
  </style>
  </style>
</head>
<body>
<h1>âœ¨ Studio Abigail âœ¨</h1>

<!-- ðŸ”¹ Schede superiori di navigazione -->
<div class="top-tabs">
  <button class="tab active" id="tab-marika">MARIKA</button>
  <button class="tab" id="tab-clienti">CLIENTI</button>
</div>

<div class="title-rule"></div>

  <div class="chat-container" id="chatContainer">
    <div class="message-wrapper bot">
      <div class="message bot">
        <p>Buongiorno Marika, come vuoi procedere oggi con la struttura grafica?</p>
        <div class="time-line time-left"></div>
        <div class="time">09:41</div>
      </div>
    </div>

    <div class="message-wrapper user">
      <div class="message user">
        <p>Vorrei rendere tutto piÃ¹ armonico e pulito, senza bordi visibili.</p>
        <div class="time-line time-right"></div>
        <div class="time" style="text-align: right;">09:42</div>
      </div>
    </div>
  </div>

  <div class="composer-rule"></div>

  <div class="composer">
      <textarea class="input-box" id="messageInput" placeholder="Scrivi un messaggio..."></textarea>
   
    <div class="right-buttons">
      <div class="send" id="sendBtn">INVIA</div>
      <div class="mic">ðŸŽ¤</div>
    </div>
  </div>

  <script>
    const textarea = document.getElementById("messageInput");
    const sendBtn = document.getElementById("sendBtn");
    const chatContainer = document.getElementById("chatContainer");

    textarea.addEventListener("keydown", function(e) {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        sendBtn.click();
      }
    });

    sendBtn.addEventListener("click", () => {
      const text = textarea.value.trim();
      if (text) {
        const wrapper = document.createElement("div");
        wrapper.className = "message-wrapper user";
        wrapper.innerHTML = `
          <div class="message user">
            <p>${text}</p>
            <div class="time-line time-right"></div>
            <div class="time" style="text-align: right;">
              ${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}
            </div>
          </div>
        `;
        chatContainer.appendChild(wrapper);
        chatContainer.scrollTop = chatContainer.scrollHeight;
        textarea.value = "";
      }
    });
    document.getElementById("sendBtn").addEventListener("click", async () => {
  const input = document.getElementById("messageInput");
  const testo = input.value.trim();
  if (!testo) return;

  aggiungiMessaggio(testo, "user");

  // ðŸ”¹ Normalizza testo per evitare errori di maiuscole/minuscole
  const comando = testo.toLowerCase();

  // ðŸ”¹ Elenco comandi riconosciuti
  const comandi = {
    ree: "Esecuzione R.E.E. â€” Reset Energetico Esteso avviato.",
    res: "Esecuzione R.E.S. â€” Reset Energetico Sintetico avviato.",
    rae: "Esecuzione R.A.E. â€” Lettura Aurica Estesa avviata.",
    ras: "Esecuzione R.A.S. â€” Lettura Aurica Sintetica avviata.",
    rve: "Esecuzione R.V.E. â€” Visione Vibrazionale Estesa avviata.",
    rvs: "Esecuzione R.V.S. â€” Visione Vibrazionale Sintetica avviata.",
    reteriae: "Esecuzione R.Eteria.E â€” Lettura Eterica Estesa avviata.",
    reterias: "Esecuzione R.Eteria.S â€” Lettura Eterica Sintetica avviata.",
    rvc: "Esecuzione R.V.C. â€” Visione Vibrazionale di Connessione avviata.",
    rva: "Esecuzione R.V.A. â€” Identikit Vibrazionale Aurico avviato.",
    rvv: "Esecuzione R.V.V. â€” Visione Vibrazionale Verticale avviata.",
    rvet: "Esecuzione R.V.Eteria â€” Visione Vibrazionale Eterica avviata.",
    rvi: "Esecuzione R.V.I. â€” IdentitÃ  Vibrazionale Interiore avviata."
  };

  // ðŸ”¹ Controlla se il testo corrisponde a un comando
  let risposta;
  if (comandi[comando]) {
    risposta = comandi[comando];
  } else {
    risposta = "âœ¨ Comando non riconosciuto. Attendere istruzioni o riprovare.";
  }

  aggiungiMessaggio(risposta, "assistant");
  input.value = "";
});  </script>
  <script>
  let deferredPrompt;
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    const installBanner = document.createElement('button');
    installBanner.textContent = 'ðŸ“± Installa Studio Abigail';
    installBanner.style.position = 'fixed';
    installBanner.style.bottom = '20px';
    installBanner.style.right = '20px';
    installBanner.style.padding = '10px 20px';
    installBanner.style.background = '#b49a6d';
    installBanner.style.color = '#fff';
    installBanner.style.border = 'none';
    installBanner.style.borderRadius = '12px';
    installBanner.style.fontFamily = 'Palatino Linotype, serif';
    installBanner.style.fontSize = '16px';
    installBanner.style.cursor = 'pointer';
    document.body.appendChild(installBanner);

    installBanner.addEventListener('click', async () => {
      installBanner.style.display = 'none';
      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      if (outcome === 'accepted') {
        console.log('App installed');
      }
      deferredPrompt = null;
    });
  });
</script>
</body>
</html>
/* ðŸŒ¿ Correzione visiva generale e armonizzazione */
.message-wrapper.bot {
  justify-content: flex-start;
  padding-left: 3vw;
}

.message-wrapper.user {
  justify-content: flex-end;
  padding-right: 3vw;
}

/* ðŸ”¹ Allineamento INVIA e microfono */
.right-buttons {
  display: flex;
  align-items: center;
  gap: 10px;
  transform: translate(-12px, -2px); /* le alza leggermente e le sposta a sinistra */
}

/* ðŸ”¹ Placeholder elegante e morbido */
.input-box::placeholder {
  color: rgba(90, 70, 50, 0.3); /* tono caldo, molto tenue */
  font-weight: 500;
  opacity: 0.6;
  transform: translateY(5px); /* lo abbassa leggermente */
  text-align: left; /* allineamento naturale */
}
